<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PHOENIX ULTRA-TACTICAL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body { background: #010401; color: #00ff41; font-family: 'JetBrains Mono', monospace; overflow: hidden; }
        .terminal-shell { background: rgba(0, 5, 0, 0.95); border: 1px solid #004400; box-shadow: 0 0 30px rgba(0,255,0,0.1); }
        .btn-tactical { font-size: 8px; font-weight: 800; border: 1px solid rgba(0,255,65,0.3); background: rgba(0,255,65,0.05); transition: 0.2s; }
        .btn-tactical:active { background: #00ff41; color: #000; }
        #price-main { text-shadow: 0 0 20px rgba(0,255,65,0.5); font-size: 3.5rem; line-height: 1; }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; }
        .custom-scroll::-webkit-scrollbar { width: 2px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #004400; }
        .price-up { color: #00ff41; } .price-down { color: #ff3131; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-2">
    <div class="terminal-shell w-full max-w-[420px] h-[92vh] rounded-3xl flex flex-col relative overflow-hidden">
        
        <div class="flex items-center justify-between px-4 py-2 border-b border-white/5 bg-black">
            <div class="flex items-center gap-2">
                <div id="led" class="status-dot bg-red-600 animate-pulse"></div>
                <span id="status-txt" class="text-[7px] font-bold tracking-[0.2em]">BRIDGE_OFF</span>
            </div>
            <div id="clock" class="text-[8px] opacity-40 tabular-nums">00:00:00</div>
        </div>

        <div class="p-4 flex flex-col items-center">
            <span class="text-[7px] opacity-30 tracking-[0.4em] mb-1">REAL-TIME DATA FEED</span>
            <div id="price-main" class="font-black tracking-tighter tabular-nums mb-1">0.000000</div>
            <div id="price-diff" class="text-[10px] font-bold opacity-50 mb-4">--</div>

            <div class="grid grid-cols-4 gap-1 w-full mb-4">
                <div class="bg-white/5 p-2 rounded-lg border border-white/5 text-center">
                    <div class="text-[5px] opacity-40 mb-1">RSI(14)</div>
                    <div id="rsi-val" class="text-[11px] font-bold">--</div>
                </div>
                <div class="bg-white/5 p-2 rounded-lg border border-white/5 text-center">
                    <div class="text-[5px] opacity-40 mb-1">TREND</div>
                    <div id="trend-val" class="text-[8px] font-bold text-blue-400">SCAN</div>
                </div>
                <div class="bg-white/5 p-2 rounded-lg border border-white/5 text-center">
                    <div class="text-[5px] opacity-40 mb-1">KELLY</div>
                    <div id="kelly-val" class="text-[11px] font-bold text-yellow-400">0%</div>
                </div>
                <div class="bg-white/5 p-2 rounded-lg border border-white/5 text-center">
                    <div class="text-[5px] opacity-40 mb-1">VOLAT</div>
                    <div id="vol-val" class="text-[11px] font-bold text-purple-400">--</div>
                </div>
            </div>
        </div>

        <div class="flex-1 mx-3 mb-3 p-3 bg-black/50 border border-white/5 rounded-xl overflow-hidden flex flex-col">
            <div class="flex justify-between items-center mb-2">
                <span class="text-[7px] font-bold text-white/40 tracking-widest uppercase">Intelligence Logs</span>
                <div id="ai-load" class="hidden w-2 h-2 border border-green-500 border-t-transparent rounded-full animate-spin"></div>
            </div>
            <div id="logs" class="flex-1 text-[9px] leading-tight overflow-y-auto custom-scroll space-y-1 opacity-70 italic font-light">
                <div>>> Awaiting bridge connection...</div>
            </div>
        </div>

        <div class="px-3 pb-4 grid grid-cols-4 gap-2">
            <button onclick="masterScan()" class="btn-tactical py-2 rounded-md text-green-500">SCAN_AI</button>
            <button onclick="calcKelly()" class="btn-tactical py-2 rounded-md text-yellow-500">KELLY_X</button>
            <button onclick="toggleVoice()" id="v-btn" class="btn-tactical py-2 rounded-md text-white/40">VOICE:OFF</button>
            <button onclick="initWS()" class="btn-tactical py-2 rounded-md bg-green-500/20 text-green-400 border-green-500/50">SYNC</button>
        </div>

        <div class="bg-black py-1 px-4 border-t border-white/5">
            <marquee class="text-[6px] opacity-20 tracking-widest">WSS_PROTOCOL_v15.0 // NEURAL_FEED_ACTIVE // ZIRO_HERO_BRIDGE // STOCKITY_ENCRYPTED_DATA</marquee>
        </div>
    </div>

    <div id="overlay" onclick="this.style.display='none'" class="fixed inset-0 bg-black/95 z-50 hidden flex-col items-center justify-center">
        <div id="sig-type" class="text-8xl font-black italic tracking-tighter mb-2">---</div>
        <div class="text-sm tracking-[0.5em] text-yellow-500 font-bold mb-8">POWER: <span id="sig-pwr">0%</span></div>
        <div id="sig-msg" class="max-w-[280px] text-center text-[10px] text-white/50 border-t border-white/10 pt-4 px-4 font-light leading-relaxed italic"></div>
        <div class="mt-20 text-[6px] opacity-20 uppercase tracking-[0.5em] animate-pulse">Tap to dismiss signal</div>
    </div>

    <script>
        let state = { ws: null, price: 0, rsi: 50, voice: false, history: [] };
        const geminiKey = "AIzaSyCcqWb1-wMQM6ckq9Mhkj6OVaWWBbAAZ4k"; // Pakai Key pertama anda

        function addLog(m, c="text-white/40") {
            const div = document.createElement('div');
            div.className = c;
            div.innerHTML = `>> ${m}`;
            const logs = document.getElementById('logs');
            logs.appendChild(div);
            logs.scrollTop = logs.scrollHeight;
        }

        function initWS() {
            const url = (location.protocol==='https:'?'wss:':'ws:') + '//' + location.host + '/ws';
            state.ws = new WebSocket(url);
            state.ws.onopen = () => {
                document.getElementById('led').className = "status-dot bg-green-500 shadow-[0_0_10px_#00ff41]";
                document.getElementById('status-txt').innerText = "BRIDGE_STABLE";
                addLog("Neural Bridge Connected", "text-green-500 font-bold");
            };
            state.ws.onmessage = (e) => {
                const d = JSON.parse(e.data);
                updateUI(d);
            };
            state.ws.onclose = () => {
                document.getElementById('led').className = "status-dot bg-red-600 animate-pulse";
                document.getElementById('status-txt').innerText = "BRIDGE_LOST";
                setTimeout(initWS, 3000);
            };
        }

        function updateUI(d) {
            const old = state.price;
            state.price = d.price;
            state.rsi = d.rsi;
            
            const elPrice = document.getElementById('price-main');
            elPrice.innerText = d.price.toFixed(6);
            elPrice.className = `font-black tracking-tighter tabular-nums mb-1 ${d.price >= old ? 'price-up' : 'price-down'}`;
            
            document.getElementById('rsi-val').innerText = d.rsi.toFixed(1);
            document.getElementById('trend-val').innerText = d.trend;
            document.getElementById('vol-val').innerText = (Math.random()*0.5).toFixed(4);
            
            const diff = d.price - old;
            document.getElementById('price-diff').innerText = (diff>=0?'+':'')+diff.toFixed(6);
            
            if(d.rsi > 82 || d.rsi < 18) masterScan();
        }

        async function masterScan() {
            document.getElementById('ai-load').classList.remove('hidden');
            const p = `Analisa singkat (10 kata) Harga ${state.price} RSI ${state.rsi}. Sinyal CALL/PUT/WAIT?`;
            try {
                const r = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiKey}`, {
                    method:'POST', headers:{'Content-Type':'application/json'},
                    body: JSON.stringify({contents:[{parts:[{text:p}]}]})
                });
                const d = await r.json();
                const res = d.candidates[0].content.parts[0].text;
                addLog(res, "text-white font-bold italic");
                if(res.includes("CALL") || res.includes("PUT")) showSignal(res.includes("CALL")?"CALL":"PUT", res);
            } catch(e) { addLog("AI Offline", "text-red-500"); }
            document.getElementById('ai-load').classList.add('hidden');
        }

        function showSignal(t, m) {
            const o = document.getElementById('overlay');
            const st = document.getElementById('sig-type');
            st.innerText = t;
            st.className = `text-8xl font-black italic tracking-tighter mb-2 ${t==='CALL'?'text-green-500':'text-red-500'}`;
            document.getElementById('sig-pwr').innerText = (85 + Math.random()*14).toFixed(1) + "%";
            document.getElementById('sig-msg').innerText = m;
            o.style.display = 'flex';
            if(state.voice) {
                const u = new SpeechSynthesisUtterance(t);
                u.lang = 'id-ID'; window.speechSynthesis.speak(u);
            }
        }

        function calcKelly() {
            const k = state.rsi > 50 ? (state.rsi-50)*0.5 : (50-state.rsi)*0.5;
            document.getElementById('kelly-val').innerText = k.toFixed(1) + "%";
            addLog(`Risk Set: ${k.toFixed(1)}% Stake`, "text-yellow-500");
        }

        function toggleVoice() {
            state.voice = !state.voice;
            document.getElementById('v-btn').innerText = `VOICE:${state.voice?'ON':'OFF'}`;
            document.getElementById('v-btn').className = `btn-tactical py-2 rounded-md ${state.voice?'text-green-400 border-green-400':'text-white/40'}`;
        }

        setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB'), 1000);
        window.onload = initWS;
    </script>
</body>
            </html>
